var gallery={};$(function(){gallery={index:0,divs:[],images:[],positions:[],width:null,maxWidth:null,margin:20,speed:"normal",container:null,loader:null,horizontalSpace:0,init:function(a){"undefined"!=typeof a&&("undefined"!=typeof a.container&&(this.container=a.container),"undefined"!=typeof a.maxWidth&&(this.maxWidth=a.maxWidth),"undefined"!=typeof a.margin&&(this.margin=a.margin),"undefined"!=typeof a.speed&&(this.speed=a.speed),"undefined"!=typeof a.images&&(this.images=a.images),"undefined"!=typeof a.loader&&(this.loader=a.loader));var b="";$.each(this.images,function(a){b+="<div><div style='display: none' class='image'><img id='img-"+a+"' />"+"</div>"+"<div class='loading'>"+"<div>"+"<img src='"+gallery.loader+"' />"+"</div>"+"</div>"+"</div>"}),this.container.html(b),this.divs=this.container.children("div"),setTimeout(function(){gallery.adjustScreen()},1e3),$(window).resize(function(){gallery.adjustScreen()}),$(this.container).find(".image").on("click",function(a){var b=a.currentTarget.children[0].id.split("-")[1];gallery.open(parseInt(b))})},adjustScreen:function(){var a=$(window).width(),b=$(window).height(),c=0,d=0;switch(this.positions=[],$(this.container).height(b),!0){case 1200>a:c=800;break;case 1400>a:c=1e3;break;case 1600>a:c=1200;break;case a>1600:c=1400}null!==this.maxWidth&&c>this.maxWidth&&(c=this.maxWidth),this.width=c,this.horizontalSpace=(a/this.width-1)*this.width/2,this.container.children().css("width",this.width),this.container.children().each(function(a,b){d+=0===a?gallery.margin:gallery.margin+gallery.width,$(b).css("left",d),gallery.positions.push(d)})},load:function(a){function e(a){if(a==b.length)return!1;if("undefined"==typeof gallery.images[b[a]])return e(++a),void 0;d=gallery.images[b[a]];var c=gallery.statusLoad[b[a]];return c?(e(++a),!1):($.get(d).done(function(){var c=$(gallery.divs[b[a]]).find(".image");c.find("img").attr("src",d),gallery.statusLoad[b[a]]=!0,e(++a),setTimeout(function(){c.fadeIn(gallery.speed,function(){$(this).next(".loading").hide(0)})},100)}).fail(function(){gallery.statusLoad[b[a]]=!1,e(++a)}),void 0)}var d,b=[a,a-1,a+1,a-2,a+2],c=0;void 0===this.statusLoad&&(this.statusLoad=[]),e(c)},open:function(a){if(0>a||a>this.images.length-1)return!1;if(this.load(a),0===this.positions.length)return setTimeout(function(){gallery.open(a)},500),!1;var b=-this.positions[a]+this.horizontalSpace;this.container.stop().animate({left:b},this.speed),this.index=a},back:function(){0!==this.index&&this.open(--this.index)},forth:function(){this.index!=this.images.length-1&&this.open(++this.index)},auto:function(a){"undefined"==typeof a&&(a=this.speed),isNaN(a)&&(a=jQuery.speed(this.speed).duration);var b="forth";this.open(this.index),this.stop(),gallery.interval=setInterval(function(){gallery.index==gallery.positions.length-1?b="back":0===gallery.index&&(b="forth"),"forth"==b?gallery.forth():"back"==b&&gallery.back()},a)},stop:function(){clearInterval(this.interval)}}});